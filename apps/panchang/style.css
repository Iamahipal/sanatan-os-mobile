/**
 * Panchang App - Material Design 3
 * Following Google M3 guidelines for web
 * @version 4.0.0
 */

/* Fonts loaded via <link> in index.html — no @import needed */

/* === M3 DESIGN TOKENS === */
:root {
    /* Primary - Saffron */
    --md-sys-color-primary: #FF9933;
    --md-sys-color-on-primary: #1A0F00;
    --md-sys-color-primary-container: #3D2400;
    --md-sys-color-on-primary-container: #FFDEBD;

    /* Secondary */
    --md-sys-color-secondary: #E0C09F;
    --md-sys-color-on-secondary: #3E2D14;
    --md-sys-color-secondary-container: #2A1F0D;
    --md-sys-color-on-secondary-container: #FFDDB8;

    /* Tertiary */
    --md-sys-color-tertiary: #B7CCAC;
    --md-sys-color-on-tertiary: #233520;
    --md-sys-color-tertiary-container: #1A2818;
    --md-sys-color-on-tertiary-container: #D2E8C7;

    /* Error */
    --md-sys-color-error: #FFB4AB;
    --md-sys-color-on-error: #690005;
    --md-sys-color-error-container: #3C0A0A;
    --md-sys-color-on-error-container: #FFDAD6;

    /* Success (Custom) */
    --md-sys-color-success: #8CD790;
    --md-sys-color-on-success: #003A0D;
    --md-sys-color-success-container: #0D2910;
    --md-sys-color-on-success-container: #B8F5BB;

    /* Surface - Dark theme */
    --md-sys-color-surface: #121212;
    --md-sys-color-on-surface: #E6E1DC;
    --md-sys-color-surface-dim: #0E0E0E;
    --md-sys-color-surface-bright: #1A1A1A;
    --md-sys-color-surface-container-lowest: #0A0A0A;
    --md-sys-color-surface-container-low: #141414;
    --md-sys-color-surface-container: #1C1C1C;
    --md-sys-color-surface-container-high: #252525;
    --md-sys-color-surface-container-highest: #2F2F2F;

    /* Outline */
    --md-sys-color-outline: rgba(255, 255, 255, 0.16);
    --md-sys-color-outline-variant: rgba(255, 255, 255, 0.08);

    /* Inverse */
    --md-sys-color-inverse-surface: #E6E1DC;
    --md-sys-color-inverse-on-surface: #1F1B16;
    --md-sys-color-inverse-primary: #855300;

    /* Shadow */
    --md-sys-color-shadow: rgba(0, 0, 0, 0.3);

    /* Typography */
    --md-ref-typeface-plain: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    --md-ref-typeface-brand: 'Noto Sans Devanagari', 'Inter', sans-serif;

    /* M3 Type Scale */
    --md-sys-typescale-display-large: 600 57px/64px var(--md-ref-typeface-brand);
    --md-sys-typescale-display-medium: 600 45px/52px var(--md-ref-typeface-brand);
    --md-sys-typescale-display-small: 600 36px/44px var(--md-ref-typeface-brand);

    --md-sys-typescale-headline-large: 600 32px/40px var(--md-ref-typeface-brand);
    --md-sys-typescale-headline-medium: 600 28px/36px var(--md-ref-typeface-brand);
    --md-sys-typescale-headline-small: 600 24px/32px var(--md-ref-typeface-brand);

    --md-sys-typescale-title-large: 500 22px/28px var(--md-ref-typeface-plain);
    --md-sys-typescale-title-medium: 500 16px/24px var(--md-ref-typeface-plain);
    --md-sys-typescale-title-small: 500 14px/20px var(--md-ref-typeface-plain);

    --md-sys-typescale-body-large: 400 16px/24px var(--md-ref-typeface-plain);
    --md-sys-typescale-body-medium: 400 14px/20px var(--md-ref-typeface-plain);
    --md-sys-typescale-body-small: 400 12px/16px var(--md-ref-typeface-plain);

    --md-sys-typescale-label-large: 500 14px/20px var(--md-ref-typeface-plain);
    --md-sys-typescale-label-medium: 500 12px/16px var(--md-ref-typeface-plain);
    --md-sys-typescale-label-small: 500 11px/16px var(--md-ref-typeface-plain);

    /* M3 Shape */
    --md-sys-shape-corner-none: 0;
    --md-sys-shape-corner-extra-small: 4px;
    --md-sys-shape-corner-small: 8px;
    --md-sys-shape-corner-medium: 12px;
    --md-sys-shape-corner-large: 16px;
    --md-sys-shape-corner-extra-large: 28px;
    --md-sys-shape-corner-full: 9999px;

    /* M3 Elevation */
    --md-sys-elevation-level0: none;
    --md-sys-elevation-level1: 0 1px 2px rgba(0, 0, 0, 0.3), 0 1px 3px 1px rgba(0, 0, 0, 0.15);
    --md-sys-elevation-level2: 0 1px 2px rgba(0, 0, 0, 0.3), 0 2px 6px 2px rgba(0, 0, 0, 0.15);
    --md-sys-elevation-level3: 0 4px 8px 3px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.3);
    --md-sys-elevation-level4: 0 6px 10px 4px rgba(0, 0, 0, 0.15), 0 2px 3px rgba(0, 0, 0, 0.3);
    --md-sys-elevation-level5: 0 8px 12px 6px rgba(0, 0, 0, 0.15), 0 4px 4px rgba(0, 0, 0, 0.3);

    /* Motion */
    --md-sys-motion-easing-emphasized: cubic-bezier(0.2, 0, 0, 1);
    --md-sys-motion-easing-standard: cubic-bezier(0.2, 0, 0, 1);
    --md-sys-motion-duration-short: 150ms;
    --md-sys-motion-duration-medium: 300ms;
    --md-sys-motion-duration-long: 500ms;
}

/* === LIGHT THEME === */
[data-theme="light"] {
    /* Primary - Deep Orange/Saffron remains, but adjusted for light bg */
    --md-sys-color-primary: #D86B00;
    --md-sys-color-on-primary: #FFFFFF;
    --md-sys-color-primary-container: #FFE0C2;
    --md-sys-color-on-primary-container: #4D2600;

    /* Secondary */
    --md-sys-color-secondary: #7A5930;
    --md-sys-color-on-secondary: #FFFFFF;
    --md-sys-color-secondary-container: #FFDDB8;
    --md-sys-color-on-secondary-container: #2A1F0D;

    /* Tertiary */
    --md-sys-color-tertiary: #4A6540;
    --md-sys-color-on-tertiary: #FFFFFF;
    --md-sys-color-tertiary-container: #CCEBC4;
    --md-sys-color-on-tertiary-container: #082105;

    /* Error */
    --md-sys-color-error: #BA1A1A;
    --md-sys-color-on-error: #FFFFFF;
    --md-sys-color-error-container: #FFDAD6;
    --md-sys-color-on-error-container: #410002;

    /* Success */
    --md-sys-color-success: #2E6C31;
    --md-sys-color-on-success: #FFFFFF;
    --md-sys-color-success-container: #CDF5D0;
    --md-sys-color-on-success-container: #002105;

    /* Surface - Light theme warm tint */
    --md-sys-color-surface: #FFF8F6;
    --md-sys-color-on-surface: #201A17;
    --md-sys-color-surface-dim: #E3DCD9;
    --md-sys-color-surface-bright: #FFF8F6;

    /* Surface Containers */
    --md-sys-color-surface-container-lowest: #FFFFFF;
    --md-sys-color-surface-container-low: #FFF1EB;
    --md-sys-color-surface-container: #FCEAE3;
    --md-sys-color-surface-container-high: #F6E4DD;
    --md-sys-color-surface-container-highest: #F0DED8;

    /* Outline */
    --md-sys-color-outline: #857366;
    --md-sys-color-outline-variant: #D7C2B4;

    /* Inverse */
    --md-sys-color-inverse-surface: #362F2C;
    --md-sys-color-inverse-on-surface: #FBEEE9;
    --md-sys-color-inverse-primary: #FFB778;

    /* Shadow */
    --md-sys-color-shadow: rgba(0, 0, 0, 0.15);
}

/* === MATERIAL SYMBOLS SETUP === */
.material-symbols-rounded {
    font-family: 'Material Symbols Rounded';
    font-weight: normal;
    font-style: normal;
    font-size: 24px;
    line-height: 1;
    letter-spacing: normal;
    text-transform: none;
    display: inline-block;
    white-space: nowrap;
    word-wrap: normal;
    direction: ltr;
    -webkit-font-smoothing: antialiased;
    font-variation-settings:
        'FILL' 0,
        'wght' 400,
        'GRAD' 0,
        'opsz' 24;
}

.material-symbols-rounded.filled {
    font-variation-settings:
        'FILL' 1,
        'wght' 400,
        'GRAD' 0,
        'opsz' 24;
}

/* === BASE === */
*,
*::before,
*::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    font-size: 16px;
    -webkit-text-size-adjust: 100%;
}

body {
    font: var(--md-sys-typescale-body-medium);
    background: var(--md-sys-color-surface);
    color: var(--md-sys-color-on-surface);
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* === HEADER === */
.app-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    position: sticky;
    top: 0;
    z-index: 100;
    background: var(--md-sys-color-surface);
    border-bottom: 1px solid var(--md-sys-color-outline-variant);
}

/* Icon Button - M3 */
.icon-btn {
    width: 48px;
    height: 48px;
    border-radius: var(--md-sys-shape-corner-full);
    background: transparent;
    border: none;
    color: var(--md-sys-color-on-surface);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    text-decoration: none;
    transition: background var(--md-sys-motion-duration-short) var(--md-sys-motion-easing-standard);
    position: relative;
    overflow: hidden;
    /* Prevent text spill */
}

.icon-btn:hover {
    background: rgba(0, 0, 0, 0.06);
}

[data-theme="light"] .icon-btn:hover {
    background: rgba(0, 0, 0, 0.06);
}

.icon-btn:focus-visible {
    outline: 2px solid var(--md-sys-color-primary);
    outline-offset: 2px;
}

.icon-btn:active {
    background: rgba(255, 255, 255, 0.12);
}

[data-theme="light"] .icon-btn:active {
    background: rgba(0, 0, 0, 0.12);
}

.icon-btn .material-symbols-rounded {
    font-size: 24px;
}

/* Location Chip - M3 Assist Chip */
.location-chip {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    height: 32px;
    padding: 0 12px 0 8px;
    background: transparent;
    border: 1px solid var(--md-sys-color-outline);
    border-radius: var(--md-sys-shape-corner-small);
    color: var(--md-sys-color-on-surface);
    font: var(--md-sys-typescale-label-large);
    cursor: pointer;
    transition: all var(--md-sys-motion-duration-short) var(--md-sys-motion-easing-standard);
}

.location-chip:hover {
    background: rgba(255, 255, 255, 0.08);
}

[data-theme="light"] .location-chip:hover {
    background: rgba(0, 0, 0, 0.06);
}

.location-chip .material-symbols-rounded {
    font-size: 18px;
    color: var(--md-sys-color-primary);
}

/* === DATE BAR === */
.date-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px;
    background: var(--md-sys-color-surface-container-low);
}

.date-center {
    text-align: center;
    cursor: pointer;
}

.hindu-date {
    display: block;
    font: var(--md-sys-typescale-title-medium);
    font-family: var(--md-ref-typeface-brand);
    color: var(--md-sys-color-primary);
}

.gregorian-date {
    display: block;
    font: var(--md-sys-typescale-body-small);
    color: var(--md-sys-color-on-surface);
    opacity: 0.6;
    margin-top: 2px;
}

/* === GUIDANCE SECTION === */
.guidance-section {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* Vara Card */
.vara-card {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    background: var(--md-sys-color-surface-container);
    border-radius: var(--md-sys-shape-corner-medium);
}

.vara-icon {
    font-size: 32px;
    line-height: 1;
}

.vara-info {
    flex: 1;
}

.vara-name {
    display: block;
    font: var(--md-sys-typescale-title-medium);
    font-family: var(--md-ref-typeface-brand);
    color: var(--md-sys-color-on-surface);
}

.vara-deity {
    display: block;
    font: var(--md-sys-typescale-body-small);
    color: var(--md-sys-color-on-surface);
    opacity: 0.7;
}

/* Day Quality - THE most important info */
.day-quality {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 16px;
    background: var(--md-sys-color-surface-container-high);
    border-radius: var(--md-sys-shape-corner-large);
}

.quality-row {
    display: flex;
    align-items: center;
    gap: 12px;
}

.quality-row.good .quality-label {
    color: var(--md-sys-color-primary);
    min-width: 80px;
    font: var(--md-sys-typescale-label-medium);
    font-weight: 600;
}

.quality-row.avoid .quality-label {
    color: var(--md-sys-color-error);
    min-width: 80px;
    font: var(--md-sys-typescale-label-medium);
    font-weight: 600;
}

.quality-value {
    font: var(--md-sys-typescale-body-medium);
    color: var(--md-sys-color-on-surface);
}

/* Insight Card */
.insight-card {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px 20px;
    background: linear-gradient(135deg,
            var(--md-sys-color-primary-container) 0%,
            rgba(255, 153, 51, 0.15) 100%);
    border-radius: var(--md-sys-shape-corner-large);
    border-left: 4px solid var(--md-sys-color-primary);
}

.insight-icon {
    font-size: 28px;
    color: var(--md-sys-color-primary);
}

.insight-content {
    flex: 1;
}

.insight-title {
    display: block;
    font: var(--md-sys-typescale-title-small);
    color: var(--md-sys-color-on-primary-container);
    font-weight: 600;
}

.insight-desc {
    display: block;
    font: var(--md-sys-typescale-body-small);
    color: var(--md-sys-color-on-primary-container);
    opacity: 0.85;
    margin-top: 4px;
}

/* === HERO SECTION === */
.hero-section {
    padding: 24px 16px;
}

.moon-hero {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 24px;
}

/* Moon Visual - Premium 3D */
.moon-visual {
    width: 88px;
    height: 88px;
    flex-shrink: 0;
    position: relative;
}

.moon-3d {
    width: 100%;
    height: 100%;
    border-radius: var(--md-sys-shape-corner-full);
    position: relative;
    overflow: hidden;
    background: radial-gradient(circle at 35% 35%,
            #FAFAFA 0%,
            #E8E8E8 25%,
            #C0C0C0 50%,
            #989898 75%,
            #707070 100%);
    box-shadow:
        inset -10px -10px 25px rgba(0, 0, 0, 0.5),
        inset 5px 5px 15px rgba(255, 255, 255, 0.25),
        0 0 40px rgba(255, 255, 255, 0.1);
}

.moon-surface {
    width: 100%;
    height: 100%;
    border-radius: var(--md-sys-shape-corner-full);
    background:
        radial-gradient(circle at 22% 28%, transparent 6%, rgba(0, 0, 0, 0.08) 8%, transparent 10%),
        radial-gradient(circle at 58% 18%, transparent 3%, rgba(0, 0, 0, 0.06) 5%, transparent 7%),
        radial-gradient(circle at 72% 42%, transparent 5%, rgba(0, 0, 0, 0.07) 7%, transparent 9%),
        radial-gradient(circle at 38% 65%, transparent 8%, rgba(0, 0, 0, 0.06) 10%, transparent 12%),
        linear-gradient(135deg, rgba(255, 255, 255, 0.35) 0%, transparent 45%);
}

.moon-shadow {
    position: absolute;
    top: -2px;
    height: calc(100% + 4px);
    background: linear-gradient(90deg,
            var(--md-sys-color-surface) 0%,
            var(--md-sys-color-surface) 70%,
            transparent 100%);
    transition: all 600ms var(--md-sys-motion-easing-emphasized);
    border-radius: var(--md-sys-shape-corner-full);
}

.moon-info {
    flex: 1;
}

.tithi-label {
    display: block;
    font: var(--md-sys-typescale-label-small);
    color: var(--md-sys-color-on-surface);
    opacity: 0.6;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-bottom: 4px;
}

.tithi-name {
    display: block;
    font: var(--md-sys-typescale-headline-medium);
    font-family: var(--md-ref-typeface-brand);
    color: var(--md-sys-color-on-surface);
}

.tithi-end {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font: var(--md-sys-typescale-label-medium);
    color: var(--md-sys-color-primary);
    margin-top: 8px;
    padding: 6px 12px;
    background: var(--md-sys-color-primary-container);
    border-radius: var(--md-sys-shape-corner-small);
}

/* === QUICK FACTS - M3 Cards === */
.quick-facts {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.fact {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    background: var(--md-sys-color-surface-container);
    border-radius: var(--md-sys-shape-corner-medium);
    border: 1px solid var(--md-sys-color-outline-variant);
    transition: all var(--md-sys-motion-duration-short) var(--md-sys-motion-easing-standard);
}

.fact:hover {
    background: var(--md-sys-color-surface-container-high);
}

.fact .material-symbols-rounded {
    font-size: 22px;
    color: var(--md-sys-color-primary);
}

.fact-content {
    flex: 1;
    min-width: 0;
}

.fact-label {
    display: block;
    font: var(--md-sys-typescale-label-small);
    color: var(--md-sys-color-on-surface);
    opacity: 0.6;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.fact-value {
    display: block;
    font: var(--md-sys-typescale-title-small);
    font-family: var(--md-ref-typeface-brand);
    color: var(--md-sys-color-on-surface);
    margin-top: 2px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* === SECTION TITLE === */
.section-title {
    font: var(--md-sys-typescale-title-medium);
    color: var(--md-sys-color-on-surface);
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.section-title .material-symbols-rounded {
    font-size: 20px;
    color: var(--md-sys-color-primary);
}

/* === TIMING SECTION === */
.timing-section {
    padding: 24px 16px;
}

/* Status Banner - M3 Container */
.status-banner {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px 20px;
    border-radius: var(--md-sys-shape-corner-large);
    margin-bottom: 20px;
}

.status-banner.good {
    background: var(--md-sys-color-success-container);
}

.status-banner.avoid {
    background: var(--md-sys-color-error-container);
}

.status-icon {
    font-size: 28px;
}

.status-banner.good .status-icon {
    color: var(--md-sys-color-success);
}

.status-banner.avoid .status-icon {
    color: var(--md-sys-color-error);
}

.status-title {
    display: block;
    font: var(--md-sys-typescale-title-small);
    font-weight: 600;
}

.status-banner.good .status-title {
    color: var(--md-sys-color-on-success-container);
}

.status-banner.avoid .status-title {
    color: var(--md-sys-color-on-error-container);
}

.status-desc {
    display: block;
    font: var(--md-sys-typescale-body-small);
    color: var(--md-sys-color-on-surface);
    opacity: 0.7;
    margin-top: 2px;
}

/* === TIME BLOCKS === */
.time-blocks {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.time-block {
    background: var(--md-sys-color-surface-container);
    border-radius: var(--md-sys-shape-corner-medium);
    overflow: hidden;
    border: 1px solid var(--md-sys-color-outline-variant);
}

.time-block.good {
    border-left: 4px solid var(--md-sys-color-success);
}

.time-block.avoid {
    border-left: 4px solid var(--md-sys-color-error);
}

.block-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 14px 16px;
    background: var(--md-sys-color-surface-container-high);
}

.block-header .material-symbols-rounded {
    font-size: 20px;
}

.time-block.good .block-header .material-symbols-rounded {
    color: var(--md-sys-color-success);
}

.time-block.avoid .block-header .material-symbols-rounded {
    color: var(--md-sys-color-error);
}

.block-title {
    font: var(--md-sys-typescale-label-large);
    color: var(--md-sys-color-on-surface);
}

.block-list {
    padding: 8px 16px 16px;
}

.time-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 0;
}

.time-row:not(:last-child) {
    border-bottom: 1px solid var(--md-sys-color-outline-variant);
}

.time-name {
    font: var(--md-sys-typescale-body-medium);
    color: var(--md-sys-color-on-surface);
}

.time-range {
    font: var(--md-sys-typescale-label-large);
    color: var(--md-sys-color-on-surface);
    opacity: 0.8;
    font-variant-numeric: tabular-nums;
}

/* === UPCOMING SECTION === */
.upcoming-section {
    padding: 24px 16px;
}

/* Event Card - M3 Filled Card */
.event-card {
    display: flex;
    gap: 16px;
    padding: 20px;
    background: var(--md-sys-color-primary-container);
    border-radius: var(--md-sys-shape-corner-large);
    margin-bottom: 16px;
}

.event-icon {
    font-size: 40px;
    overflow: hidden;
}

.event-info {
    flex: 1;
}

.event-name {
    font: var(--md-sys-typescale-title-medium);
    font-family: var(--md-ref-typeface-brand);
    color: var(--md-sys-color-on-primary-container);
}

.event-name-en {
    display: block;
    font: var(--md-sys-typescale-body-small);
    color: var(--md-sys-color-on-primary-container);
    opacity: 0.8;
    margin-top: 2px;
}

.event-desc {
    font: var(--md-sys-typescale-body-small);
    color: var(--md-sys-color-on-primary-container);
    opacity: 0.7;
    margin-top: 8px;
    line-height: 1.5;
}

/* Upcoming List */
.upcoming-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.upcoming-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px;
    background: var(--md-sys-color-surface-container);
    border-radius: var(--md-sys-shape-corner-medium);
    border: 1px solid var(--md-sys-color-outline-variant);
    transition: all var(--md-sys-motion-duration-short) var(--md-sys-motion-easing-standard);
}

.upcoming-item:hover {
    background: var(--md-sys-color-surface-container-high);
}

.upcoming-date {
    width: 48px;
    text-align: center;
    flex-shrink: 0;
}

.upcoming-day {
    display: block;
    font: var(--md-sys-typescale-headline-small);
    color: var(--md-sys-color-primary);
    line-height: 1;
}

.upcoming-month {
    display: block;
    font: var(--md-sys-typescale-label-small);
    color: var(--md-sys-color-on-surface);
    opacity: 0.6;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-top: 4px;
}

.upcoming-name {
    font: var(--md-sys-typescale-body-large);
    color: var(--md-sys-color-on-surface);
}

.no-events {
    text-align: center;
    padding: 32px;
    font: var(--md-sys-typescale-body-medium);
    color: var(--md-sys-color-on-surface);
    opacity: 0.6;
    background: var(--md-sys-color-surface-container);
    border-radius: var(--md-sys-shape-corner-medium);
    border: 1px dashed var(--md-sys-color-outline);
}

/* === DETAILS SECTION === */
.details-section {
    padding: 20px 16px 60px;
}

/* Expand Button - M3 Text Button */
.expand-btn {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px 16px;
    background: transparent;
    border: 1px solid var(--md-sys-color-outline);
    border-radius: var(--md-sys-shape-corner-full);
    color: var(--md-sys-color-primary);
    font: var(--md-sys-typescale-label-large);
    cursor: pointer;
    transition: all var(--md-sys-motion-duration-short) var(--md-sys-motion-easing-standard);
}

.expand-btn:hover {
    background: rgba(255, 153, 51, 0.08);
}

.expand-btn .material-symbols-rounded {
    font-size: 20px;
    transition: transform var(--md-sys-motion-duration-medium) var(--md-sys-motion-easing-emphasized);
}

.expand-btn.active .material-symbols-rounded {
    transform: rotate(180deg);
}

.details-content {
    margin-top: 20px;
}

.detail-group {
    margin-bottom: 24px;
}

.detail-group h3 {
    font: var(--md-sys-typescale-label-medium);
    color: var(--md-sys-color-on-surface);
    opacity: 0.6;
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.detail-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.detail-item {
    padding: 16px;
    background: var(--md-sys-color-surface-container);
    border-radius: var(--md-sys-shape-corner-medium);
    border: 1px solid var(--md-sys-color-outline-variant);
}

.detail-label {
    display: block;
    font: var(--md-sys-typescale-label-small);
    color: var(--md-sys-color-on-surface);
    opacity: 0.6;
    margin-bottom: 4px;
}

.detail-value {
    display: block;
    font: var(--md-sys-typescale-title-small);
    font-family: var(--md-ref-typeface-brand);
    color: var(--md-sys-color-on-surface);
}

.detail-time {
    display: inline-block;
    font: var(--md-sys-typescale-label-small);
    color: var(--md-sys-color-on-primary-container);
    background: var(--md-sys-color-primary-container);
    padding: 4px 10px;
    border-radius: var(--md-sys-shape-corner-small);
    margin-top: 8px;
    font-weight: 500;
}

/* Choghadiya */
.choghadiya-tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
}

.chog-tab {
    flex: 1;
    padding: 12px;
    background: var(--md-sys-color-surface-container);
    border: 1px solid var(--md-sys-color-outline);
    border-radius: var(--md-sys-shape-corner-full);
    color: var(--md-sys-color-on-surface);
    font: var(--md-sys-typescale-label-large);
    cursor: pointer;
    transition: all var(--md-sys-motion-duration-short) var(--md-sys-motion-easing-standard);
}

.chog-tab.active {
    background: var(--md-sys-color-primary);
    color: var(--md-sys-color-on-primary);
    border-color: var(--md-sys-color-primary);
}

.choghadiya-list {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.chog-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 16px;
    background: var(--md-sys-color-surface-container);
    border-radius: var(--md-sys-shape-corner-small);
    border-left: 4px solid transparent;
}

.chog-item.good {
    border-left-color: var(--md-sys-color-success);
}

.chog-item.bad {
    border-left-color: var(--md-sys-color-error);
}

.chog-item.current {
    background: var(--md-sys-color-primary-container);
    border-left-color: var(--md-sys-color-primary);
}

.chog-name {
    font: var(--md-sys-typescale-body-medium);
    font-family: var(--md-ref-typeface-brand);
    color: var(--md-sys-color-on-surface);
}

.chog-time {
    font: var(--md-sys-typescale-label-medium);
    color: var(--md-sys-color-on-surface);
    opacity: 0.7;
    font-variant-numeric: tabular-nums;
}

/* === MODALS - M3 Dialog === */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    opacity: 0;
    pointer-events: none;
    transition: opacity var(--md-sys-motion-duration-medium) var(--md-sys-motion-easing-standard);
    padding: 24px;
}

.modal-overlay.active {
    opacity: 1;
    pointer-events: auto;
}

.modal-content {
    width: 100%;
    max-width: 400px;
    background: var(--md-sys-color-surface-container-high);
    border-radius: var(--md-sys-shape-corner-extra-large);
    box-shadow: var(--md-sys-elevation-level3);
    overflow: hidden;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px 24px 16px;
}

.modal-header h3 {
    font: var(--md-sys-typescale-headline-small);
    color: var(--md-sys-color-on-surface);
}

.close-btn {
    width: 40px;
    height: 40px;
    border-radius: var(--md-sys-shape-corner-full);
    background: transparent;
    border: none;
    color: var(--md-sys-color-on-surface);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background var(--md-sys-motion-duration-short);
}

.close-btn:hover {
    background: rgba(255, 255, 255, 0.08);
}

[data-theme="light"] .close-btn:hover {
    background: rgba(0, 0, 0, 0.06);
}

.modal-body {
    padding: 0 24px 24px;
}

.setting-item {
    margin-bottom: 20px;
}

.setting-item:last-child {
    margin-bottom: 0;
}

.setting-item label {
    display: block;
    font: var(--md-sys-typescale-label-medium);
    color: var(--md-sys-color-on-surface);
    opacity: 0.8;
    margin-bottom: 8px;
}

.setting-input {
    width: 100%;
    padding: 16px;
    background: var(--md-sys-color-surface-container);
    border: 1px solid var(--md-sys-color-outline);
    border-radius: var(--md-sys-shape-corner-small);
    color: var(--md-sys-color-on-surface);
    font: var(--md-sys-typescale-body-large);
    transition: border-color var(--md-sys-motion-duration-short);
}

.setting-input:focus {
    outline: none;
    border-color: var(--md-sys-color-primary);
}

.location-auto-btn {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 16px;
    background: var(--md-sys-color-primary);
    border: none;
    border-radius: var(--md-sys-shape-corner-full);
    color: var(--md-sys-color-on-primary);
    font: var(--md-sys-typescale-label-large);
    cursor: pointer;
    margin-bottom: 20px;
    transition: all var(--md-sys-motion-duration-short) var(--md-sys-motion-easing-standard);
}

.location-auto-btn:hover {
    box-shadow: var(--md-sys-elevation-level2);
}

.city-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
}

.city-btn {
    padding: 14px;
    background: var(--md-sys-color-surface-container);
    border: 1px solid var(--md-sys-color-outline);
    border-radius: var(--md-sys-shape-corner-small);
    color: var(--md-sys-color-on-surface);
    font: var(--md-sys-typescale-label-large);
    cursor: pointer;
    transition: all var(--md-sys-motion-duration-short) var(--md-sys-motion-easing-standard);
}

.city-btn:hover {
    background: var(--md-sys-color-surface-container-high);
    border-color: var(--md-sys-color-primary);
}

/* === RESPONSIVE === */
@media (max-width: 400px) {
    .quick-facts {
        grid-template-columns: 1fr 1fr;
    }

    .quick-facts .fact:last-child {
        grid-column: span 2;
    }

    .detail-grid {
        grid-template-columns: 1fr;
    }

    .moon-visual {
        width: 72px;
        height: 72px;
    }

    .tithi-name {
        font: var(--md-sys-typescale-headline-small);
        font-family: var(--md-ref-typeface-brand);
    }
}

/* Calendar Info */
.calendar-info {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.cal-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: var(--md-sys-color-surface-container);
    border-radius: var(--md-sys-shape-corner-small);
}

.cal-item span:first-child {
    font: var(--md-sys-typescale-body-medium);
    color: var(--md-sys-color-on-surface);
    opacity: 0.7;
}

.cal-item span:last-child {
    font: var(--md-sys-typescale-title-small);
    font-family: var(--md-ref-typeface-brand);
    color: var(--md-sys-color-on-surface);
}

/* Dead .date-nav class removed — buttons use .icon-btn */

/* === ANIMATIONS === */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(8px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.hero-section,
.timing-section,
.upcoming-section,
.details-section {
    animation: fadeIn var(--md-sys-motion-duration-medium) var(--md-sys-motion-easing-standard);
}

/* === TODAY INDICATOR === */
.today-badge {
    display: inline-block;
    font: var(--md-sys-typescale-label-small);
    color: var(--md-sys-color-primary);
    padding: 2px 8px;
    border-radius: var(--md-sys-shape-corner-full);
    background: rgba(255, 153, 51, 0.12);
    margin-top: 2px;
    animation: fadeIn 0.3s ease;
}

.date-bar.not-today .date-center {
    border: 1px solid var(--md-sys-color-primary);
    border-radius: var(--md-sys-shape-corner-medium);
    padding: 6px 12px;
}

/* === SKELETON LOADING === */
.skeleton-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 5;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s ease;
}

.skeleton-overlay.active {
    opacity: 1;
}

.skeleton-line {
    height: 16px;
    border-radius: 8px;
    margin: 8px 16px;
    background: linear-gradient(90deg,
            var(--md-sys-color-surface-container) 25%,
            var(--md-sys-color-surface-container-high) 50%,
            var(--md-sys-color-surface-container) 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
    0% {
        background-position: 200% 0;
    }

    100% {
        background-position: -200% 0;
    }
}

/* === SLIDE ANIMATION (Swipe) === */
.app-container {
    transition: transform 0.25s var(--md-sys-motion-easing-standard);
}

.app-container.slide-left {
    animation: slideLeft 0.25s var(--md-sys-motion-easing-standard);
}

.app-container.slide-right {
    animation: slideRight 0.25s var(--md-sys-motion-easing-standard);
}

@keyframes slideLeft {
    0% {
        transform: translateX(30px);
        opacity: 0.7;
    }

    100% {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideRight {
    0% {
        transform: translateX(-30px);
        opacity: 0.7;
    }

    100% {
        transform: translateX(0);
        opacity: 1;
    }
}

/* === SHARE TOAST === */
.share-toast {
    position: fixed;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: var(--md-sys-color-inverse-surface);
    color: var(--md-sys-color-inverse-on-surface);
    padding: 12px 24px;
    border-radius: var(--md-sys-shape-corner-medium);
    font: var(--md-sys-typescale-body-medium);
    z-index: 1000;
    opacity: 0;
    transition: all 0.3s var(--md-sys-motion-easing-standard);
    box-shadow: var(--md-sys-elevation-3);
}

.share-toast.show {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
}