<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>पञ्चाङ्ग - Daily Guide</title>
    <meta name="description" content="Your daily Hindu calendar guide. Know the right time for the right action.">
    <meta name="theme-color" content="#FF9933">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">

    <!-- M3 Fonts: Inter, Noto Sans Devanagari, Material Symbols -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+Devanagari:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0&display=block"
        rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <button id="detect-location" class="location-chip">
                <span class="material-symbols-rounded">my_location</span>
                <span id="current-city">Pune</span>
            </button>
            <div style="display: flex; gap: 8px;">
                <button id="theme-toggle" class="icon-btn">
                    <span class="material-symbols-rounded">light_mode</span>
                </button>
                <button class="icon-btn" onclick="document.getElementById('location-modal').style.display='flex'">
                    <span class="material-symbols-rounded">settings</span>
                </button>
            </div>
        </header>

        <!-- Date Selector -->
        <div class="date-bar">
            <button id="prev-day" class="icon-btn">
                <span class="material-symbols-rounded">chevron_left</span>
            </button>
            <div class="date-center" id="date-center">
                <span id="hindu-date" class="hindu-date">मार्गशीर्ष कृष्ण नवमी</span>
                <span id="gregorian-date" class="gregorian-date">9 Feb 2026</span>
            </div>
            <button id="next-day" class="icon-btn">
                <span class="material-symbols-rounded">chevron_right</span>
            </button>
        </div>

        <!-- TODAY'S GUIDANCE - First Principles: Answer "What should I do today?" -->
        <section class="guidance-section" id="guidance-section">
            <!-- Vara (Weekday) Display -->
            <div class="vara-card" id="vara-card">
                <div class="vara-icon" id="vara-icon">☀️</div>
                <div class="vara-info">
                    <span class="vara-name" id="vara-name">रविवार</span>
                    <span class="vara-deity" id="vara-deity">Lord Surya's Day</span>
                </div>
            </div>

            <!-- Day Quality Summary - THE most important info -->
            <div class="day-quality" id="day-quality">
                <div class="quality-row good">
                    <span class="quality-label">✓ Good for</span>
                    <span class="quality-value" id="good-for">Travel, Learning, Health</span>
                </div>
                <div class="quality-row avoid">
                    <span class="quality-label">✗ Avoid</span>
                    <span class="quality-value" id="avoid-for">Major purchases, Surgery</span>
                </div>
            </div>

            <!-- Today's Insight - Dynamic context-aware guidance -->
            <div class="insight-card" id="insight-card">
                <span class="insight-icon material-symbols-rounded filled">lightbulb</span>
                <div class="insight-content">
                    <span class="insight-title" id="insight-title">Good day for new beginnings</span>
                    <span class="insight-desc" id="insight-desc">Start important tasks after Brahma Muhurta ends at
                        06:17</span>
                </div>
            </div>
        </section>

        <!-- SECTION 1: Today at a Glance (The "What") -->
        <section class="hero-section">
            <div class="moon-hero">
                <div class="moon-visual">
                    <div class="moon-3d" id="moon-visual">
                        <div class="moon-surface"></div>
                        <div id="moon-shadow" class="moon-shadow"></div>
                    </div>
                </div>
                <div class="moon-info">
                    <div class="tithi-main">
                        <span id="tithi-label" class="tithi-label">तिथि</span>
                        <span id="tithi-name" class="tithi-name">कृष्ण नवमी</span>
                    </div>
                    <span id="tithi-end" class="tithi-end">Till 20:44</span>
                </div>
            </div>

            <div class="quick-facts">
                <div class="fact">
                    <span class="material-symbols-rounded filled">star</span>
                    <div class="fact-content">
                        <span class="fact-label">Nakshatra</span>
                        <span id="nakshatra-name" class="fact-value">विशाखा</span>
                    </div>
                </div>
                <div class="fact">
                    <span class="material-symbols-rounded filled">wb_twilight</span>
                    <div class="fact-content">
                        <span class="fact-label">Sunrise</span>
                        <span id="sunrise" class="fact-value">07:05</span>
                    </div>
                </div>
                <div class="fact">
                    <span class="material-symbols-rounded filled">nights_stay</span>
                    <div class="fact-content">
                        <span class="fact-label">Sunset</span>
                        <span id="sunset" class="fact-value">18:05</span>
                    </div>
                </div>
                <div class="fact">
                    <span class="material-symbols-rounded filled">dark_mode</span>
                    <div class="fact-content">
                        <span class="fact-label">Moonrise</span>
                        <span id="moonrise" class="fact-value">--:--</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: Right Now (The "When") -->
        <section class="timing-section">
            <h2 class="section-title">
                <span class="material-symbols-rounded">schedule</span>
                Right Now
            </h2>

            <!-- Current Status Banner -->
            <div id="current-status" class="status-banner good">
                <span class="status-icon material-symbols-rounded filled">check_circle</span>
                <div class="status-text">
                    <span id="status-title" class="status-title">Auspicious Time</span>
                    <span id="status-desc" class="status-desc">लाभ Choghadiya until 10:30</span>
                </div>
            </div>

            <!-- Simple Time Blocks -->
            <div class="time-blocks">
                <div class="time-block good" id="good-times">
                    <div class="block-header">
                        <span class="material-symbols-rounded filled">verified</span>
                        <span class="block-title">Good Times Today</span>
                    </div>
                    <div id="good-times-list" class="block-list">
                        <div class="time-row">
                            <span class="time-name">Brahma Muhurta</span>
                            <span class="time-range">05:29 - 06:17</span>
                        </div>
                    </div>
                </div>

                <div class="time-block avoid" id="avoid-times">
                    <div class="block-header">
                        <span class="material-symbols-rounded filled">warning</span>
                        <span class="block-title">Avoid These Times</span>
                    </div>
                    <div id="avoid-times-list" class="block-list">
                        <div class="time-row">
                            <span class="time-name">Rahu Kalam</span>
                            <span class="time-range">07:30 - 09:00</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: Upcoming (The "Plan") -->
        <section class="upcoming-section">
            <h2 class="section-title">
                <span class="material-symbols-rounded">event</span>
                Coming Up
            </h2>

            <!-- Today's Events -->
            <div id="today-events" class="events-today">
                <!-- Populated by JS -->
            </div>

            <!-- Upcoming Festivals -->
            <div id="upcoming-festivals" class="upcoming-list">
                <!-- Populated by JS -->
            </div>
        </section>

        <!-- SECTION 4: Learn More (Expandable) -->
        <section class="details-section">
            <button class="expand-btn" id="expand-details">
                <span>More Details</span>
                <span class="material-symbols-rounded">expand_more</span>
            </button>

            <div id="details-content" class="details-content" style="display: none;">
                <!-- Panchang Elements -->
                <div class="detail-group">
                    <h3>पञ्चाङ्ग Elements</h3>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <span class="detail-label">तिथि</span>
                            <span id="d-tithi" class="detail-value">कृष्ण नवमी</span>
                            <span id="d-tithi-time" class="detail-time">Till 20:44</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">नक्षत्र</span>
                            <span id="d-nakshatra" class="detail-value">विशाखा</span>
                            <span id="d-nakshatra-time" class="detail-time">Till 18:45</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">योग</span>
                            <span id="d-yoga" class="detail-value">शुभ</span>
                            <span id="d-yoga-time" class="detail-time">Till 22:10</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">करण</span>
                            <span id="d-karana" class="detail-value">विष्टि</span>
                            <span id="d-karana-time" class="detail-time">Till 10:23</span>
                        </div>
                    </div>
                </div>

                <!-- Choghadiya -->
                <div class="detail-group">
                    <h3>चौघड़िया</h3>
                    <div class="choghadiya-tabs">
                        <button class="chog-tab active" data-period="day">Day</button>
                        <button class="chog-tab" data-period="night">Night</button>
                    </div>
                    <div id="choghadiya-list" class="choghadiya-list">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Calendar Info -->
                <div class="detail-group">
                    <h3>पञ्चाङ्ग Calendar</h3>
                    <div id="calendar-info" class="calendar-info">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settings-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Settings</h3>
                <button class="close-btn" id="close-settings">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </div>
            <div class="modal-body">
                <button class="location-auto-btn" id="detect-location">
                    <span class="material-symbols-rounded">my_location</span>
                    Use My Location
                </button>

                <div class="setting-item">
                    <label>Or select a city:</label>
                    <div class="city-grid" id="city-grid">
                        <button class="city-btn" data-lat="28.6139" data-lon="77.2090">Delhi</button>
                        <button class="city-btn" data-lat="19.0760" data-lon="72.8777">Mumbai</button>
                        <button class="city-btn" data-lat="18.5204" data-lon="73.8567">Pune</button>
                        <button class="city-btn" data-lat="12.9716" data-lon="77.5946">Bangalore</button>
                        <button class="city-btn" data-lat="13.0827" data-lon="80.2707">Chennai</button>
                        <button class="city-btn" data-lat="22.5726" data-lon="88.3639">Kolkata</button>
                        <button class="city-btn" data-lat="17.3850" data-lon="78.4867">Hyderabad</button>
                        <button class="city-btn" data-lat="23.0225" data-lon="72.5714">Ahmedabad</button>
                        <button class="city-btn" data-lat="26.9124" data-lon="75.7873">Jaipur</button>
                        <button class="city-btn" data-lat="26.8467" data-lon="80.9462">Lucknow</button>
                        <button class="city-btn" data-lat="25.3176" data-lon="82.9739">Varanasi</button>
                        <button class="city-btn" data-lat="23.1765" data-lon="75.7885">Ujjain</button>
                    </div>
                </div>

                <div class="setting-item advanced">
                    <label>Ayanamsa System</label>
                    <select id="ayanamsa-select" class="setting-input">
                        <option value="lahiri" selected>Lahiri (Chitrapaksha)</option>
                        <option value="krishnamurti">Krishnamurti (KP)</option>
                        <option value="raman">B.V. Raman</option>
                        <option value="yukteshwar">Sri Yukteshwar</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Location Modal -->
    <div class="modal-overlay" id="location-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Set Location</h3>
                <button class="close-btn" id="close-location">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </div>
            <div class="modal-body">
                <button class="location-auto-btn" id="detect-location-2">
                    <span class="material-symbols-rounded">my_location</span>
                    Detect My Location
                </button>

                <div class="setting-item">
                    <label>Popular Cities:</label>
                    <div class="city-grid" id="city-grid-2">
                        <button class="city-btn" data-lat="28.6139" data-lon="77.2090">Delhi</button>
                        <button class="city-btn" data-lat="19.0760" data-lon="72.8777">Mumbai</button>
                        <button class="city-btn" data-lat="18.5204" data-lon="73.8567">Pune</button>
                        <button class="city-btn" data-lat="12.9716" data-lon="77.5946">Bangalore</button>
                        <button class="city-btn" data-lat="13.0827" data-lon="80.2707">Chennai</button>
                        <button class="city-btn" data-lat="22.5726" data-lon="88.3639">Kolkata</button>
                        <button class="city-btn" data-lat="17.3850" data-lon="78.4867">Hyderabad</button>
                        <button class="city-btn" data-lat="25.3176" data-lon="82.9739">Varanasi</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="lib/astronomy.js"></script>
    <script src="lib/vedic-engine.js"></script>
    <script src="lib/festival-calculator.js"></script>
    <script src="script.js"></script>
</body>

</html>